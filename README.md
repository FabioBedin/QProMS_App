## QProMS - Quantitative PROteomics Made Simple

QProMS is a shiny app you can access [here](https://bioserver.ieo.it/shiny/app/qproms). The app enables easy but powerful and reproducible analyses for label-free proteomics data. It works out of the box with  major data-dependent and data-independent search engine results (MaxQuant, FragPipe, Spectronaut, DIA-NN, AlphaPept) as well as custom result tables. It can produce publication-quality figures and export HTML reports and parameter files for sharing and reproducing results. It can handle multiple simultaneous comparisons between different experimental conditions.

### Getting started

The app guides you through a typical analysis workflow for proteomics:

1. Data upload and experimental design annotation
2. Quality control and handling missing values
3. Statistical analysis (clustering, volcano and more)
4. Network and functional analysis
5. Exporting results.

#### Upload page

Upload search engine results. Files should have a column for gene IDs, and columns for quantitation of each protein in the respective conditions. Several search engines are supported by default. File names are arbitrary, but the files to upload for each search engine are


| Software    | File to upload (default name)  | Comment                                                                                                                                                            | 
|-------------|--------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------| 
| MaxQuant    | ProteinGroups.txt              | Must contain "Gene Names" column. QProMS includes automatic parsing of reverse, contaminants and only identified by site and handling of ambiguous protein groups. |
| FragPipe    | combined_protein.tsv           | QProMS has automatic annotation of contaminants included by Philosopher/FragPipe.  |
| Spectronaut |                                |  | 
| Dia-NN      | report.unique_genes_matrix.txt | |  
| AlphaPept   | results_proteins.csv           | |  

Select the organism of your data and the palette for plots and click on "upload".

If you have worked with QProMS before and are trying to reproduce an analysis or an earlier session, you can tick on "load parameters" and upload the QProMS .yml file generated by "Generate report" (see below) together with your protein table.

The app will warn you if you are trying to use a parameter file that does not match the name of the one the analysis was originally performed with. 

After clicking on "upload" you can edit your experimental design in the table that appears below. It is modelled after the MaxQuant and FragPipe experimental design tables.

| Column name | Meaning                                                                                                                                                         |
|-------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------|
| key         | Unique name for the column that is only used by QProMS (not editable)                                                                                           | 
| label       | Unique name for the column                                                                                                                                      |
| condition   | The experimental condition (e.g. control/tumor, time point etc). Can be letters and/or numbers. All replicates of one condition must have the same condition name |
| replicate   | The replica number. Replicate numbers need not be unique. This is useful if multiple injections or MS settings are used for each replica             |
| keep        | Whether to keep or discard this column for the QProMS analysis                                                                                                  |

Once you are done editing the experimental design, click "Apply". The green "Start" button should appear. Clicking it will unlock the rest of the app.

#### Filter data page

The "filter data" page displays protein counts, upset plot, intensity distributions and the distribution of coefficients of variation (CVs). All intensities are automatically log2 transformed. 

The blue ribbon for "parameters" can be expanded to reveal some settings that can be changed. All settings will propagate through later steps of the analysis and saved in the report.

The user can tweak filtering based by valid values based on percentage valid values in at least one experimmental condition (group), in all groups, or in total.

Normalization across samples using variance stabilizing normalization (VSN) can be toggled on here.

Some options available here are dependent on the search engine used: for MaxQuant, the app automatically filters proteins to those with minimum 2 peptides detected (editable by the user), and removes contaminants, reverse and only identified by site (also editable by the user). For FragPipe, contaminants are automatically removed based on the [CrapOme list](https://reprint-apms.org/?q=about) utilized by FragPipe and Philosopher during database construction.

At the bottom of the page, the table post data filtering is available for export and interactive searching.